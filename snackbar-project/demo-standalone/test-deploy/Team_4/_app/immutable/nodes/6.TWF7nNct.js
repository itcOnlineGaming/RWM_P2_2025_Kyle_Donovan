import{f as O,e as s,a as q}from"../chunks/ClZJ-oqt.js";import{i as z}from"../chunks/DOE-zonE.js";import{o as J}from"../chunks/D32VF5zq.js";import{L as M,M as W,N as C,O as e,P as r,Q as a,R as L,g as h,o as b,S as i}from"../chunks/C5Mxa1Nn.js";import{s as y}from"../chunks/DrQbHkcN.js";var $=O(`<div style="padding: 20px; max-width: 600px; margin: 0 auto;"><h1>Notification Test</h1> <p><strong>Permission Status:</strong> </p> <div style="display: flex; flex-direction: column; gap: 10px; margin: 20px 0;"><button style="padding: 15px; font-size: 16px;">Request Permission</button> <button style="padding: 15px; font-size: 16px;">Send Test Notification</button> <button style="padding: 15px; font-size: 16px;">Subscribe to Push Notifications</button> <button style="padding: 15px; font-size: 16px;">Trigger Server Notification</button></div> <p style="font-size: 18px; margin-top: 20px;"> </p> <hr style="margin: 30px 0;"/> <h2>Troubleshooting</h2> <ul style="line-height: 1.8;"><li>Make sure you're using Chrome or Safari</li> <li>Not in private/incognito mode</li> <li>Not in an in-app browser (Instagram, Facebook, etc.)</li> <li>iOS requires 16.4+ for web notifications</li></ul></div>`);function U(v,w){M(w,!1);let n=b("checking..."),t=b("");async function x(){if(typeof window>"u"||!("Notification"in window)){i(n,"❌ Not supported");return}i(n,Notification.permission)}async function N(){if(typeof window>"u"||!("Notification"in window))return;const o=await Notification.requestPermission();i(n,o),i(t,`Permission: ${o}`)}async function S(){typeof window>"u"||!("Notification"in window)||(Notification.permission==="granted"?(new Notification("Test Notification",{body:"If you see this, notifications work!",vibrate:[200,100,200]}),i(t,"✅ Sent! Check your notifications.")):i(t,`❌ Permission denied: ${Notification.permission}`))}async function k(){if("serviceWorker"in navigator&&"PushManager"in window){const f=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:"BB0mh7LqN9ykwQ6JehCD58ogN9Lphh3LVJ7QaFm6iUZJh5Hr_FfXt9ey4OOyU-BuJblIu2v2ycVShK7WSoy46vE"});await fetch("http://localhost:3000/subscribe",{method:"POST",body:JSON.stringify(f),headers:{"Content-Type":"application/json"}}),i(t,"✅ Subscribed to push notifications!")}else i(t,"❌ Push messaging not supported.")}J(()=>{if(x(),"serviceWorker"in navigator){const o=document.querySelector("base")?.getAttribute("href")||"/",f=`${o}sw.js`.replace("//","/");navigator.serviceWorker.register(f,{scope:o})}}),z();var c=$(),p=e(r(c),2),P=e(r(p));a(p);var u=e(p,2),l=r(u),d=e(l,2),m=e(d,2),_=e(m,2);a(u);var g=e(u,2),T=r(g,!0);a(g),L(6),a(c),W(()=>{y(P,` ${h(n)??""}`),y(T,h(t))}),s("click",l,N),s("click",d,S),s("click",m,k),s("click",_,async()=>{await fetch("http://localhost:3000/notify",{method:"POST"}),i(t,"Notification triggered from server!")}),q(v,c),C()}export{U as component};
